---
export const prerender = false;

import Reservoir from "reservoir";

import Quote, { type QuoteData } from "../../components/Quote.astro";
import Layout from "../../layouts/Layout.astro";
import quotes from "../_quotes.json";

interface Props {
    path: string | undefined;
}

const { path } = Astro.params;

let selectedQuotes = Reservoir<QuoteData>(25);

if (path === undefined) {
    quotes.forEach((quote) => selectedQuotes.pushSome(quote));
} else if (path === "positive") {
    quotes.forEach((quote) => {
        if (quote.score > 0) {
            selectedQuotes.pushSome(quote);
        }
    });
} else {
    return Astro.redirect("/404");
}
---

<Layout title="Random Quotes">
    {
        selectedQuotes.map((data) => {
            return <Quote data={data} />;
        })
    }
</Layout>
